(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4ce49259"],{4943:function(t,e,i){"use strict";i("da13")},cb06:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dictionary-container"},[i("el-card",{staticClass:"header-card",attrs:{shadow:"hover"}},[i("div",{staticClass:"card-header"},[i("div",{staticClass:"header-title"},[i("i",{staticClass:"el-icon-notebook-2"}),i("span",[t._v("数据字典管理")])]),i("div",{staticClass:"header-desc"},[t._v(" 管理系统中使用的各类数据字典，支持树形层级管理 ")])]),i("div",{staticClass:"header-content"},[i("div",{staticClass:"left-area"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.handleAdd}},[t._v("新增字典")])],1)])]),i("el-card",{staticClass:"table-card",attrs:{shadow:"hover"}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.tableData,"row-key":"dictId",border:"","tree-props":{children:"children",hasChildren:"hasChildren"},size:"medium"}},[i("el-table-column",{attrs:{prop:"dictId",label:"字典编号",width:"80",align:"center"}}),i("el-table-column",{attrs:{prop:"dictCode",label:"字典编码","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"code-cell"},[i("i",{staticClass:"el-icon-collection-tag"}),t._v(" "+t._s(e.row.dictCode)+" ")])]}}])}),i("el-table-column",{attrs:{prop:"dictValue",label:"字典内容","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tag",{attrs:{size:"medium",effect:"plain"}},[t._v(t._s(e.row.dictValue))])]}}])}),i("el-table-column",{attrs:{label:"操作",width:"260",fixed:"right",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tooltip",{attrs:{content:"编辑字典",placement:"top"}},[i("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(i){return t.handleEdit(e.row)}}})],1),0===e.row.parentId?i("el-tooltip",{attrs:{content:"添加子项",placement:"top"}},[i("el-button",{attrs:{type:"success",icon:"el-icon-plus",size:"mini"},on:{click:function(i){return t.handleAddChild(e.row)}}})],1):t._e(),i("el-tooltip",{attrs:{content:"删除字典",placement:"top"}},[i("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(i){return t.handleDelete(e.row)}}})],1)]}}])})],1),i("div",{staticClass:"pagination-container"},[i("el-pagination",{attrs:{background:"","current-page":t.pageParams.pageNum,"page-sizes":[10,20,30,50],"page-size":t.pageParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),i("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible,width:"500px","close-on-click-modal":!1,"custom-class":"custom-dialog"},on:{"update:visible":function(e){t.dialogVisible=e},close:t.handleDialogClose}},[i("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"编码",prop:"dictCode"}},[i("el-input",{attrs:{placeholder:"请输入编码",disabled:!!t.form.dictId},model:{value:t.form.dictCode,callback:function(e){t.$set(t.form,"dictCode",e)},expression:"form.dictCode"}})],1),i("el-form-item",{attrs:{label:"内容",prop:"dictValue"}},[i("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form.dictValue,callback:function(e){t.$set(t.form,"dictValue",e)},expression:"form.dictValue"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.submitForm}},[t._v("确 定")])],1)],1)],1)},n=[],o=(i("e9c4"),i("b64b"),i("d3b7"),i("e56e")),r={name:"Dictionary",data:function(){return{loading:!1,pageParams:{pageNum:1,pageSize:10},total:0,tableData:[],dialogVisible:!1,dialogTitle:"",form:{dictId:void 0,parentId:void 0,dictCode:"",dictValue:""},rules:{dictCode:[{required:!0,message:"请输入编码",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],dictValue:[{required:!0,message:"请输入内容",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}]},originalForm:null}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.loading=!0,Object(o["c"])(this.pageParams.pageNum,this.pageParams.pageSize).then((function(e){t.tableData=e.data.data||[],t.total=e.data.total||0})).catch((function(){t.tableData=[],t.total=0})).finally((function(){t.loading=!1}))},getUpdateData:function(t){var e=this;Object(o["b"])(t).then((function(t){e.form=t.data||{},e.originalForm=JSON.parse(JSON.stringify(e.form))}))},isFormChanged:function(){return!this.originalForm||(this.form.dictCode!==this.originalForm.dictCode||this.form.dictValue!==this.originalForm.dictValue)},handleSizeChange:function(t){this.pageParams.pageSize=t,this.pageParams.pageNum=1,this.getList()},handleCurrentChange:function(t){this.pageParams.pageNum=t,this.getList()},handleAdd:function(){this.dialogTitle="新增字典",this.form={parentId:0,dictCode:"",dictValue:""},this.originalForm=null,this.dialogVisible=!0},handleEdit:function(t){this.dialogTitle="编辑字典",this.getUpdateData(t.dictId),this.dialogVisible=!0},handleAddChild:function(t){this.dialogTitle="新增子项",this.form={parentId:t.dictId,dictCode:"",dictValue:""},this.originalForm=null,this.dialogVisible=!0},handleDelete:function(t){var e=this;this.$confirm("确认删除该条记录吗？","提示",{type:"warning"}).then((function(){Object(o["f"])(t.dictId).then((function(){e.$message.success("删除成功"),e.getList()}))})).catch((function(){}))},submitForm:function(){var t=this;this.$refs.form.validate((function(e){if(e){var i=!!t.form.dictId;if(i&&!t.isFormChanged())return void(t.dialogVisible=!1);var a={dictCode:t.form.dictCode,dictValue:t.form.dictValue,parentId:t.form.parentId};i&&(a.dictId=t.form.dictId);var n=i?o["e"]:o["a"];n(a).then((function(){t.$message.success(i?"修改成功":"新增成功"),t.dialogVisible=!1,t.getList()}))}}))},handleDialogClose:function(){this.$refs.form.clearValidate(),this.form={parentId:void 0,dictCode:"",dictValue:""},this.originalForm=null}}},l=r,c=(i("4943"),i("2877")),d=Object(c["a"])(l,a,n,!1,null,"6e9ef11a",null);e["default"]=d.exports},da13:function(t,e,i){},e56e:function(t,e,i){"use strict";i.d(e,"a",(function(){return n})),i.d(e,"b",(function(){return o})),i.d(e,"e",(function(){return r})),i.d(e,"f",(function(){return l})),i.d(e,"c",(function(){return c})),i.d(e,"d",(function(){return d}));i("99af");var a=i("b775");function n(t){return Object(a["a"])({url:"/dictionary",method:"post",data:t})}function o(t){return Object(a["a"])({url:"/dictionary/".concat(t),method:"get"})}function r(t){return Object(a["a"])({url:"/dictionary",method:"put",data:t})}function l(t){return Object(a["a"])({url:"/dictionary/".concat(t),method:"delete"})}function c(t,e){return Object(a["a"])({url:"/dictionary/".concat(t,"/").concat(e),method:"get"})}function d(t){return Object(a["a"])({url:"/dictionary/getDropDownList/".concat(t),method:"get"})}},e9c4:function(t,e,i){var a=i("23e7"),n=i("d066"),o=i("d039"),r=n("JSON","stringify"),l=/[\uD800-\uDFFF]/g,c=/^[\uD800-\uDBFF]$/,d=/^[\uDC00-\uDFFF]$/,s=function(t,e,i){var a=i.charAt(e-1),n=i.charAt(e+1);return c.test(t)&&!d.test(n)||d.test(t)&&!c.test(a)?"\\u"+t.charCodeAt(0).toString(16):t},u=o((function(){return'"\\udf06\\ud834"'!==r("\udf06\ud834")||'"\\udead"'!==r("\udead")}));r&&a({target:"JSON",stat:!0,forced:u},{stringify:function(t,e,i){var a=r.apply(null,arguments);return"string"==typeof a?a.replace(l,s):a}})}}]);