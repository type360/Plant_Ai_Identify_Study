(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22516255"],{"2d79":function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"dataset-detail"},[s("div",{staticClass:"back-container"},[s("el-button",{attrs:{icon:"el-icon-back"},on:{click:t.goBack}},[t._v("返回")])],1),s("el-card",{staticClass:"info-card",attrs:{shadow:"hover"}},[s("div",{staticClass:"card-header"},[s("span",{staticClass:"title"},[t._v("基本信息")])]),s("el-descriptions",{attrs:{column:3,border:""}},[s("el-descriptions-item",{attrs:{label:"数据集编号"}},[t._v(" "+t._s(t.datasetInfo.datasetId)+" ")]),s("el-descriptions-item",{attrs:{label:"数据集名称"}},[t._v(" "+t._s(t.datasetInfo.datasetName)+" ")]),s("el-descriptions-item",{attrs:{label:"数据集类型"}},[s("el-tag",{attrs:{size:"medium"}},[t._v(t._s(t.datasetInfo.datasetType))])],1),s("el-descriptions-item",{attrs:{label:"数据集状态"}},[s("el-tag",{attrs:{type:t.getStatusType,size:"medium"}},[t._v(" "+t._s(t.datasetInfo.datasetStatus)+" ")])],1),s("el-descriptions-item",{attrs:{label:"数据集用途"}},[s("el-tag",{attrs:{type:t.getUsageType,size:"medium"}},[t._v(" "+t._s(t.datasetInfo.datasetUsage)+" ")])],1),s("el-descriptions-item",{attrs:{label:"创建信息"}},[t._v(" "+t._s(t.datasetInfo.createUser)+" / "+t._s(t.datasetInfo.createTime)+" ")]),s("el-descriptions-item",{attrs:{label:"数据集描述",span:3}},[t._v(" "+t._s(t.datasetInfo.datasetDesc||"暂无描述")+" ")])],1)],1),s("el-card",{staticClass:"classify-card",attrs:{shadow:"hover"}},[s("div",{staticClass:"card-header"},[s("div",{staticClass:"header-left"},[s("span",{staticClass:"title"},[t._v("分类列表")]),s("span",{staticClass:"subtitle"},[t._v("共 "+t._s(t.datasetInfo.classifyNum||0)+" 个分类")]),s("span",{staticClass:"subtitle"},[t._v("共 "+t._s(t.datasetInfo.entityNum||0)+" 个实体")])]),s("div",{staticClass:"header-right"},[s("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:t.handleAddClassify}},[t._v(" 新增分类 ")])],1)]),s("div",{staticClass:"classify-list"},[s("el-row",{attrs:{gutter:20}},t._l(t.classifyList,(function(a,e){return s("el-col",{key:a.classifyId,attrs:{span:8}},[s("el-card",{staticClass:"classify-item",attrs:{shadow:"hover"}},[s("div",{staticClass:"classify-content"},[s("div",{staticClass:"classify-header"},[s("span",{staticClass:"index"},[t._v("#"+t._s(e+1))]),s("h3",{staticClass:"name",attrs:{title:a.classifyName}},[t._v(" "+t._s(a.classifyName)+" ")])]),s("div",{staticClass:"classify-info"},[s("div",{staticClass:"info-item"},[s("i",{staticClass:"el-icon-picture-outline"}),s("span",[t._v(t._s(a.entityNum||0)+" 个实体")])])]),s("div",{staticClass:"classify-actions"},[s("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(s){return t.handleClassifyEdit(a)}}},[t._v(" 修改 ")]),s("el-button",{attrs:{type:"text",icon:"el-icon-view"},on:{click:function(s){return t.handleClassifyDetail(a)}}},[t._v(" 详情 ")]),s("el-button",{staticClass:"danger",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(s){return t.handleClassifyDelete(a)}}},[t._v(" 删除 ")])],1)])])],1)})),1),t.classifyList.length?t._e():s("el-empty",{attrs:{description:"暂无分类数据"}})],1)]),s("el-dialog",{attrs:{title:"add"===t.dialogType?"新增分类":"修改分类",visible:t.classifyDialogVisible,width:"500px","close-on-click-modal":!1},on:{"update:visible":function(a){t.classifyDialogVisible=a},close:t.handleDialogClose}},[s("el-form",{ref:"classifyForm",attrs:{model:t.classifyForm,rules:t.classifyRules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"数据集名称"}},[s("el-input",{attrs:{disabled:""},model:{value:t.datasetInfo.datasetName,callback:function(a){t.$set(t.datasetInfo,"datasetName",a)},expression:"datasetInfo.datasetName"}})],1),s("el-form-item",{attrs:{label:"分类名称",prop:"classifyName"}},[s("el-input",{attrs:{placeholder:"请输入分类名称",maxlength:"50","show-word-limit":""},model:{value:t.classifyForm.classifyName,callback:function(a){t.$set(t.classifyForm,"classifyName",a)},expression:"classifyForm.classifyName"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(a){t.classifyDialogVisible=!1}}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:t.submitClassifyForm}},[t._v("确 定")])],1)],1)],1)},i=[],n=s("c7eb"),c=s("1da1"),l=s("ecdd"),r=(s("99af"),s("b775"));function o(t){return Object(r["a"])({url:"/classify",method:"post",data:t})}function d(t){return Object(r["a"])({url:"/classify/".concat(t),method:"get"})}function f(t){return Object(r["a"])({url:"/classify",method:"put",data:t})}function u(t,a){return Object(r["a"])({url:"/classify/".concat(t,"/").concat(a),method:"delete"})}var y={name:"DatasetDetail",data:function(){return{loading:!1,datasetInfo:{},classifyList:[],classifyDialogVisible:!1,dialogType:"add",classifyForm:{classifyId:void 0,classifyName:"",datasetId:void 0},originalClassifyName:"",classifyRules:{classifyName:[{required:!0,message:"请输入分类名称",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}]}}},computed:{getStatusType:function(){var t={"初始化":"warning","已上传":"success"};return t[this.datasetInfo.datasetStatus]||"info"},getUsageType:function(){var t={"初始化训练":"primary","优化训练":"success","评估训练":"warning"};return t[this.datasetInfo.datasetUsage]||"info"}},created:function(){var t=this.$route.query.datasetId;t&&this.getDetail(t)},methods:{goBack:function(){this.$router.back()},getDetail:function(t){var a=this;return Object(c["a"])(Object(n["a"])().mark((function s(){var e;return Object(n["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a.loading=!0,s.prev=1,s.next=4,Object(l["c"])(t);case 4:e=s.sent,200===e.code&&(a.datasetInfo=e.data||{},a.classifyList=e.data.classifies||[]);case 6:return s.prev=6,a.loading=!1,s.finish(6);case 9:case"end":return s.stop()}}),s,null,[[1,,6,9]])})))()},handleAddClassify:function(){this.dialogType="add",this.classifyForm={classifyName:"",datasetId:this.datasetInfo.datasetId},this.classifyDialogVisible=!0},handleClassifyEdit:function(t){var a=this;return Object(c["a"])(Object(n["a"])().mark((function s(){var e;return Object(n["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a.dialogType="edit",s.next=3,d(t.classifyId);case 3:e=s.sent,200===e.code&&(a.classifyForm={classifyId:e.data.classifyId,classifyName:e.data.classifyName,datasetId:a.datasetInfo.datasetId},a.originalClassifyName=e.data.classifyName,a.classifyDialogVisible=!0);case 5:case"end":return s.stop()}}),s)})))()},submitClassifyForm:function(){var t=this;this.$refs.classifyForm.validate(function(){var a=Object(c["a"])(Object(n["a"])().mark((function a(s){return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!s){a.next=19;break}if(a.prev=1,"add"!==t.dialogType){a.next=8;break}return a.next=5,o(t.classifyForm);case 5:t.$message.success("新增成功"),a.next=12;break;case 8:if(t.classifyForm.classifyName===t.originalClassifyName){a.next=12;break}return a.next=11,f(t.classifyForm);case 11:t.$message.success("修改成功");case 12:t.classifyDialogVisible=!1,t.getDetail(t.datasetInfo.datasetId),a.next=19;break;case 16:a.prev=16,a.t0=a["catch"](1),console.error("保存失败:",a.t0);case 19:case"end":return a.stop()}}),a,null,[[1,16]])})));return function(t){return a.apply(this,arguments)}}())},handleClassifyDetail:function(t){this.$router.push({path:"/dataset/entity",query:{datasetId:this.datasetInfo.datasetId,classifyId:t.classifyId,classifyName:t.classifyName}})},handleClassifyDelete:function(t){var a=this;this.$confirm("确认删除该分类吗？删除后不可恢复","提示",{type:"warning"}).then(Object(c["a"])(Object(n["a"])().mark((function s(){return Object(n["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,u(a.datasetInfo.datasetId,t.classifyId);case 3:a.$message.success("删除成功"),a.getDetail(a.datasetInfo.datasetId),s.next=10;break;case 7:s.prev=7,s.t0=s["catch"](0),console.error("删除失败:",s.t0);case 10:case"end":return s.stop()}}),s,null,[[0,7]])})))).catch((function(){}))},handleDialogClose:function(){var t;null===(t=this.$refs.classifyForm)||void 0===t||t.resetFields(),this.classifyForm={classifyId:void 0,classifyName:"",datasetId:void 0},this.originalClassifyName=""}}},m=y,p=(s("d8d8"),s("2877")),h=Object(p["a"])(m,e,i,!1,null,"97707256",null);a["default"]=h.exports},"641d":function(t,a,s){},d8d8:function(t,a,s){"use strict";s("641d")},ecdd:function(t,a,s){"use strict";s.d(a,"d",(function(){return i})),s.d(a,"e",(function(){return n})),s.d(a,"b",(function(){return c})),s.d(a,"a",(function(){return l})),s.d(a,"f",(function(){return r})),s.d(a,"c",(function(){return o}));s("99af");var e=s("b775");function i(t,a,s){return Object(e["a"])({url:"/dataset/".concat(t,"/").concat(a),method:"get",params:s})}function n(t){return Object(e["a"])({url:"/dataset/".concat(t),method:"get"})}function c(t){return Object(e["a"])({url:"/dataset/".concat(t),method:"delete"})}function l(t){return Object(e["a"])({url:"/dataset",method:"post",data:t})}function r(t){return Object(e["a"])({url:"/dataset",method:"put",data:t})}function o(t){return Object(e["a"])({url:"/dataset/detail/".concat(t),method:"get"})}}}]);