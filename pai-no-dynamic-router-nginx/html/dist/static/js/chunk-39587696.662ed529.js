(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39587696"],{8004:function(e,t,a){"use strict";a("a27f")},"96bd":function(e,t,a){"use strict";a.d(t,"e",(function(){return o})),a.d(t,"c",(function(){return i})),a.d(t,"f",(function(){return n})),a.d(t,"g",(function(){return l})),a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return c})),a.d(t,"d",(function(){return u}));a("99af");var r=a("b775");function o(e,t,a){return Object(r["a"])({url:"/operator/".concat(e,"/").concat(t),method:"get",params:a})}function i(e){return Object(r["a"])({url:"/operator/".concat(e),method:"get"})}function n(e){return Object(r["a"])({url:"/operator/import",method:"post",data:e,headers:{"Content-Type":"multipart/form-data"}})}function l(e){return Object(r["a"])({url:"/operator",method:"put",data:e})}function s(e){return Object(r["a"])({url:"/operator/".concat(e),method:"delete"})}function c(e){return Object(r["a"])({url:"/operator",method:"delete",data:e})}function u(){return Object(r["a"])({url:"/operator/getDropDownList",method:"get"})}},a27f:function(e,t,a){},dcd6:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"operator-container"},[a("el-card",{staticClass:"filter-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"filter-container"},[a("div",{staticClass:"left-btns"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-upload"},on:{click:e.showImportDialog}},[e._v("导入数据")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",disabled:!e.selectedRows.length},on:{click:e.handleBatchDelete}},[e._v("批量删除")])],1),a("div",{staticClass:"right-filters"},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择算子类型",clearable:""},on:{change:e.handleFilter},model:{value:e.queryParams.operatorType,callback:function(t){e.$set(e.queryParams,"operatorType",t)},expression:"queryParams.operatorType"}},e._l(e.typeOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})})),1),a("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择算子分类",clearable:""},on:{change:e.handleFilter},model:{value:e.queryParams.operatorCategory,callback:function(t){e.$set(e.queryParams,"operatorCategory",t)},expression:"queryParams.operatorCategory"}},e._l(e.categoryOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})})),1)],1)])]),a("el-card",{staticClass:"table-card",attrs:{shadow:"hover"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableData,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{type:"index",label:"序号",width:"80",align:"center",index:e.getIndex}}),a("el-table-column",{attrs:{prop:"operatorName",label:"算子名称","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"operatorType",label:"算子类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["基础算子"===t.row.operatorType?a("el-tag",{attrs:{type:"info",effect:"plain"}},[e._v(" "+e._s(t.row.operatorType)+" ")]):e._e(),"自定义算子"===t.row.operatorType?a("el-tag",{attrs:{effect:"plain"}},[e._v(" "+e._s(t.row.operatorType)+" ")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"operatorUrl",label:"算子路径","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"info",effect:"plain"}},[e._v(" "+e._s(t.row.operatorUrl)+" ")])]}}])}),a("el-table-column",{attrs:{prop:"operatorCategory",label:"算子分类",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["网络结构"===t.row.operatorCategory?a("el-tag",{attrs:{type:"warning",effect:"plain"}},[e._v(" "+e._s(t.row.operatorCategory)+" ")]):e._e(),"优化器"===t.row.operatorCategory?a("el-tag",{attrs:{type:"danger",effect:"plain"}},[e._v(" "+e._s(t.row.operatorCategory)+" ")]):e._e(),"损失函数"===t.row.operatorCategory?a("el-tag",{attrs:{type:"success",effect:"plain"}},[e._v(" "+e._s(t.row.operatorCategory)+" ")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"createUser",label:"创建用户",align:"center"}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center"}}),a("el-table-column",{attrs:{label:"操作",width:"120",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:"修改",placement:"top"}},[a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){return e.handleEdit(t.row)}}})],1),a("el-tooltip",{attrs:{content:"删除",placement:"top"}},[a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return e.handleDelete(t.row)}}})],1)]}}])})],1)],1),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{background:"","current-page":e.pageParams.pageNum,"page-sizes":[5,10,20,30,50],"page-size":e.pageParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"导入数据",visible:e.importDialogVisible,width:"600px"},on:{"update:visible":function(t){e.importDialogVisible=t},close:e.handleImportDialogClose}},[a("div",{staticClass:"import-content"},[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"#","auto-upload":!1,"on-change":e.handleFileChange,"file-list":e.fileList,limit:1,accept:".xlsx,.xls"}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传Excel文件，且不超过10MB ")])])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.importDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.uploading},on:{click:e.submitImport}},[e._v(" "+e._s(e.uploading?"导入中":"确 定")+" ")])],1)]),a("el-dialog",{attrs:{title:"编辑算子",visible:e.editDialogVisible,width:"500px"},on:{"update:visible":function(t){e.editDialogVisible=t},close:e.handleEditDialogClose}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.editRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"算子名称",prop:"operatorName"}},[a("el-input",{attrs:{placeholder:"请输入算子名称"},model:{value:e.editForm.operatorName,callback:function(t){e.$set(e.editForm,"operatorName",t)},expression:"editForm.operatorName"}})],1),a("el-form-item",{attrs:{label:"算子路径",prop:"operatorUrl"}},[a("el-input",{attrs:{placeholder:"请输入算子路径"},model:{value:e.editForm.operatorUrl,callback:function(t){e.$set(e.editForm,"operatorUrl",t)},expression:"editForm.operatorUrl"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitEdit}},[e._v("确 定")])],1)],1)],1)},o=[],i=a("c7eb"),n=a("1da1"),l=(a("d81d"),a("e9c4"),a("b64b"),a("d3b7"),a("a573"),a("96bd")),s={name:"Operator",data:function(){return{queryParams:{operatorType:"",operatorCategory:""},typeOptions:[{id:0,value:"基础算子"},{id:1,value:"自定义算子"}],categoryOptions:[{id:1,value:"网络结构"},{id:2,value:"优化器"},{id:3,value:"损失函数"}],tableData:[],pageParams:{pageNum:1,pageSize:5},total:0,loading:!1,importDialogVisible:!1,fileList:[],uploading:!1,editDialogVisible:!1,editForm:{operatorId:void 0,operatorName:"",operatorUrl:""},originalEditForm:null,editRules:{operatorName:[{required:!0,message:"请输入算子名称",trigger:"blur"}],operatorUrl:[{required:!0,message:"请输入算子路径",trigger:"blur"}]},selectedRows:[]}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.loading=!0,Object(l["e"])(this.pageParams.pageNum,this.pageParams.pageSize,this.queryParams).then((function(t){200===t.code&&(e.tableData=t.data.data||[],e.total=t.data.total||0)})).finally((function(){e.loading=!1}))},handleFileChange:function(e){if(e.raw){var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e.raw.type||"application/vnd.ms-excel"===e.raw.type,a=e.size/1024/1024<10;return t?a?void(this.fileList=[e]):(this.$message.error("上传文件大小不能超过 10MB!"),this.fileList=[],!1):(this.$message.error("上传文件只能是 Excel 格式!"),this.fileList=[],!1)}},submitImport:function(){var e=this;return Object(n["a"])(Object(i["a"])().mark((function t(){var a,r;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.fileList.length){t.next=3;break}return e.$message.warning("请选择要上传的文件"),t.abrupt("return");case 3:return e.uploading=!0,a=new FormData,a.append("file",e.fileList[0].raw),t.prev=6,t.next=9,Object(l["f"])(a);case 9:r=t.sent,200===r.code&&(e.$message.success("导入成功"),e.importDialogVisible=!1,e.getList());case 11:return t.prev=11,e.uploading=!1,t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[6,,11,14]])})))()},handleImportDialogClose:function(){this.fileList=[],this.uploading=!1},handleFilter:function(){this.pageParams.pageNum=1,this.getList()},handleSizeChange:function(e){this.pageParams.pageSize=e,this.pageParams.pageNum=1,this.getList()},handleCurrentChange:function(e){this.pageParams.pageNum=e,this.getList()},handleSelectionChange:function(e){this.selectedRows=e},handleBatchDelete:function(){var e=this;return Object(n["a"])(Object(i["a"])().mark((function t(){var a;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.selectedRows.length){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$confirm("确认要删除选中的算子吗？","提示",{type:"warning"});case 4:return a=e.selectedRows.map((function(e){return e.operatorId})),t.next=7,Object(l["a"])(a);case 7:e.$message.success("批量删除成功"),e.tableData.length===a.length&&(e.pageParams.pageNum=e.pageParams.pageNum-1),e.getList();case 10:case"end":return t.stop()}}),t)})))()},handleDelete:function(e){var t=this;return Object(n["a"])(Object(i["a"])().mark((function a(){return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$confirm("确认删除该算子吗？","提示",{type:"warning"});case 2:return a.next=4,Object(l["b"])(e.operatorId);case 4:t.$message.success("删除成功"),console.log(t.tableData),1==t.tableData.length&&(t.pageParams.pageNum=t.pageParams.pageNum-1),t.getList();case 8:case"end":return a.stop()}}),a)})))()},handleEdit:function(e){var t=this;return Object(n["a"])(Object(i["a"])().mark((function a(){var r;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(l["c"])(e.operatorId);case 2:r=a.sent,200===r.code&&(t.editForm=r.data,t.originalEditForm=JSON.parse(JSON.stringify(r.data)),t.editDialogVisible=!0);case 4:case"end":return a.stop()}}),a)})))()},isFormChanged:function(){return this.editForm.operatorName!==this.originalEditForm.operatorName||this.editForm.operatorUrl!==this.originalEditForm.operatorUrl},submitEdit:function(){var e=this;this.$refs.editForm.validate(function(){var t=Object(n["a"])(Object(i["a"])().mark((function t(a){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=9;break}if(e.isFormChanged()){t.next=4;break}return e.editDialogVisible=!1,t.abrupt("return");case 4:return t.next=6,Object(l["g"])(e.editForm);case 6:e.$message.success("修改成功"),e.editDialogVisible=!1,e.getList();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleEditDialogClose:function(){this.$refs.editForm.resetFields(),this.editForm={operatorId:void 0,operatorName:"",operatorUrl:""},this.originalEditForm=null},getIndex:function(e){return(this.pageParams.pageNum-1)*this.pageParams.pageSize+e+1},showImportDialog:function(){this.importDialogVisible=!0}}},c=s,u=(a("8004"),a("2877")),p=Object(u["a"])(c,r,o,!1,null,"c738b820",null);t["default"]=p.exports},e9c4:function(e,t,a){var r=a("23e7"),o=a("d066"),i=a("d039"),n=o("JSON","stringify"),l=/[\uD800-\uDFFF]/g,s=/^[\uD800-\uDBFF]$/,c=/^[\uDC00-\uDFFF]$/,u=function(e,t,a){var r=a.charAt(t-1),o=a.charAt(t+1);return s.test(e)&&!c.test(o)||c.test(e)&&!s.test(r)?"\\u"+e.charCodeAt(0).toString(16):e},p=i((function(){return'"\\udf06\\ud834"'!==n("\udf06\ud834")||'"\\udead"'!==n("\udead")}));n&&r({target:"JSON",stat:!0,forced:p},{stringify:function(e,t,a){var r=n.apply(null,arguments);return"string"==typeof r?r.replace(l,u):r}})}}]);