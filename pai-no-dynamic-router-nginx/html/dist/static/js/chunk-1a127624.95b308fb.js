(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a127624"],{"0ccb":function(e,t,a){var n=a("50c4"),r=a("1148"),o=a("1d80"),i=Math.ceil,s=function(e){return function(t,a,s){var l,c,u=String(o(t)),d=u.length,m=void 0===s?" ":String(s),f=n(a);return f<=d||""==m?u:(l=f-d,c=r.call(m,i(l/m.length)),c.length>l&&(c=c.slice(0,l)),e?u+c:c+u)}};e.exports={start:s(!1),end:s(!0)}},1148:function(e,t,a){"use strict";var n=a("a691"),r=a("1d80");e.exports="".repeat||function(e){var t=String(r(this)),a="",o=n(e);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(a+=t);return a}},"14c3":function(e,t,a){var n=a("c6b6"),r=a("9263");e.exports=function(e,t){var a=e.exec;if("function"===typeof a){var o=a.call(e,t);if("object"!==typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==n(e))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(e,t)}},"25f0":function(e,t,a){"use strict";var n=a("6eeb"),r=a("825a"),o=a("d039"),i=a("ad6d"),s="toString",l=RegExp.prototype,c=l[s],u=o((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),d=c.name!=s;(u||d)&&n(RegExp.prototype,s,(function(){var e=r(this),t=String(e.source),a=e.flags,n=String(void 0===a&&e instanceof RegExp&&!("flags"in l)?i.call(e):a);return"/"+t+"/"+n}),{unsafe:!0})},"2c3e":function(e,t,a){var n=a("83ab"),r=a("9f7f").UNSUPPORTED_Y,o=a("9bf2").f,i=a("69f3").get,s=RegExp.prototype;n&&r&&o(RegExp.prototype,"sticky",{configurable:!0,get:function(){if(this!==s){if(this instanceof RegExp)return!!i(this).sticky;throw TypeError("Incompatible receiver, RegExp required")}}})},"4d63":function(e,t,a){var n=a("83ab"),r=a("da84"),o=a("94ca"),i=a("7156"),s=a("9bf2").f,l=a("241c").f,c=a("44e7"),u=a("ad6d"),d=a("9f7f"),m=a("6eeb"),f=a("d039"),p=a("69f3").set,g=a("2626"),v=a("b622"),h=v("match"),b=r.RegExp,y=b.prototype,x=/a/g,w=/a/g,O=new b(x)!==x,T=d.UNSUPPORTED_Y,S=n&&o("RegExp",!O||T||f((function(){return w[h]=!1,b(x)!=x||b(w)==w||"/a/i"!=b(x,"i")})));if(S){var j=function(e,t){var a,n=this instanceof j,r=c(e),o=void 0===t;if(!n&&r&&e.constructor===j&&o)return e;O?r&&!o&&(e=e.source):e instanceof j&&(o&&(t=u.call(e)),e=e.source),T&&(a=!!t&&t.indexOf("y")>-1,a&&(t=t.replace(/y/g,"")));var s=i(O?new b(e,t):b(e,t),n?this:y,j);return T&&a&&p(s,{sticky:a}),s},k=function(e){e in j||s(j,e,{configurable:!0,get:function(){return b[e]},set:function(t){b[e]=t}})},C=l(b),E=0;while(C.length>E)k(C[E++]);y.constructor=j,j.prototype=y,m(r,"RegExp",j)}g("RegExp")},"4d90":function(e,t,a){"use strict";var n=a("23e7"),r=a("0ccb").start,o=a("9a0c");n({target:"String",proto:!0,forced:o},{padStart:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},5319:function(e,t,a){"use strict";var n=a("d784"),r=a("825a"),o=a("7b0b"),i=a("50c4"),s=a("a691"),l=a("1d80"),c=a("8aa5"),u=a("14c3"),d=Math.max,m=Math.min,f=Math.floor,p=/\$([$&'`]|\d\d?|<[^>]*>)/g,g=/\$([$&'`]|\d\d?)/g,v=function(e){return void 0===e?e:String(e)};n("replace",2,(function(e,t,a,n){var h=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,b=n.REPLACE_KEEPS_$0,y=h?"$":"$0";return[function(a,n){var r=l(this),o=void 0==a?void 0:a[e];return void 0!==o?o.call(a,r,n):t.call(String(r),a,n)},function(e,n){if(!h&&b||"string"===typeof n&&-1===n.indexOf(y)){var o=a(t,e,this,n);if(o.done)return o.value}var l=r(e),f=String(this),p="function"===typeof n;p||(n=String(n));var g=l.global;if(g){var w=l.unicode;l.lastIndex=0}var O=[];while(1){var T=u(l,f);if(null===T)break;if(O.push(T),!g)break;var S=String(T[0]);""===S&&(l.lastIndex=c(f,i(l.lastIndex),w))}for(var j="",k=0,C=0;C<O.length;C++){T=O[C];for(var E=String(T[0]),_=d(m(s(T.index),f.length),0),F=[],D=1;D<T.length;D++)F.push(v(T[D]));var R=T.groups;if(p){var I=[E].concat(F,_,f);void 0!==R&&I.push(R);var N=String(n.apply(void 0,I))}else N=x(E,f,_,F,R,n);_>=k&&(j+=f.slice(k,_)+N,k=_+E.length)}return j+f.slice(k)}];function x(e,a,n,r,i,s){var l=n+e.length,c=r.length,u=g;return void 0!==i&&(i=o(i),u=p),t.call(s,u,(function(t,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return a.slice(0,n);case"'":return a.slice(l);case"<":s=i[o.slice(1,-1)];break;default:var u=+o;if(0===u)return t;if(u>c){var d=f(u/10);return 0===d?t:d<=c?void 0===r[d-1]?o.charAt(1):r[d-1]+o.charAt(1):t}s=r[u-1]}return void 0===s?"":s}))}}))},"550c":function(e,t,a){},"588a":function(e,t,a){"use strict";a("550c")},6400:function(e,t,a){"use strict";a.d(t,"e",(function(){return r})),a.d(t,"a",(function(){return o})),a.d(t,"c",(function(){return i})),a.d(t,"f",(function(){return s})),a.d(t,"b",(function(){return l})),a.d(t,"d",(function(){return c}));var n=a("b775");function r(e,t){return Object(n["a"])({url:"/model/pageAndCondition/".concat(e),method:"get",params:t})}function o(e){return Object(n["a"])({url:"/model",method:"post",data:e})}function i(e){return Object(n["a"])({url:"/model/".concat(e),method:"get"})}function s(e){return Object(n["a"])({url:"/model",method:"put",data:e})}function l(e){return Object(n["a"])({url:"/model/".concat(e),method:"delete"})}function c(e){return Object(n["a"])({url:"/model/detail/".concat(e),method:"get"})}},"7db0":function(e,t,a){"use strict";var n=a("23e7"),r=a("b727").find,o=a("44d2"),i=a("ae40"),s="find",l=!0,c=i(s);s in[]&&Array(1)[s]((function(){l=!1})),n({target:"Array",proto:!0,forced:l||!c},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),o(s)},"8aa5":function(e,t,a){"use strict";var n=a("6547").charAt;e.exports=function(e,t,a){return t+(a?n(e,t).length:1)}},"9a0c":function(e,t,a){var n=a("342f");e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(n)},"9a9a":function(e,t,a){"use strict";var n=a("23e7"),r=a("2266"),o=a("1c0b"),i=a("825a");n({target:"Iterator",proto:!0,real:!0},{some:function(e){return i(this),o(e),r(this,(function(t){if(e(t))return r.stop()}),void 0,!1,!0).stopped}})},c356:function(e,t,a){"use strict";a.d(t,"d",(function(){return r})),a.d(t,"b",(function(){return o})),a.d(t,"f",(function(){return i})),a.d(t,"a",(function(){return s})),a.d(t,"g",(function(){return l})),a.d(t,"c",(function(){return c})),a.d(t,"e",(function(){return u}));a("99af");var n=a("b775");function r(e,t){return Object(n["a"])({url:"/model/operation/getTrainingDatasets/".concat(e,"/").concat(t),method:"get"})}function o(e){return Object(n["a"])({url:"/model/operation/config/".concat(e),method:"get"})}function i(e){return Object(n["a"])({url:"/model/operation/train",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/model/operation/evaluate",method:"post",data:e})}function l(e,t){return Object(n["a"])({url:"/model/operation/release/".concat(e,"/").concat(t),method:"post"})}function c(){return Object(n["a"])({url:"/model/operation/getReleaseModel",method:"get"})}function u(e,t){var a=new FormData;return a.append("file",t),Object(n["a"])({url:"/model/operation/identify/".concat(e),method:"post",data:a,headers:{"Content-Type":"multipart/form-data"}})}},d784:function(e,t,a){"use strict";a("ac1f");var n=a("6eeb"),r=a("d039"),o=a("b622"),i=a("9263"),s=a("9112"),l=o("species"),c=!r((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),d=o("replace"),m=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),f=!r((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var a="ab".split(e);return 2!==a.length||"a"!==a[0]||"b"!==a[1]}));e.exports=function(e,t,a,d){var p=o(e),g=!r((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),v=g&&!r((function(){var t=!1,a=/a/;return"split"===e&&(a={},a.constructor={},a.constructor[l]=function(){return a},a.flags="",a[p]=/./[p]),a.exec=function(){return t=!0,null},a[p](""),!t}));if(!g||!v||"replace"===e&&(!c||!u||m)||"split"===e&&!f){var h=/./[p],b=a(p,""[e],(function(e,t,a,n,r){return t.exec===i?g&&!r?{done:!0,value:h.call(t,a,n)}:{done:!0,value:e.call(a,t,n)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:m}),y=b[0],x=b[1];n(String.prototype,e,y),n(RegExp.prototype,p,2==t?function(e,t){return x.call(e,this,t)}:function(e){return x.call(e,this)})}d&&s(RegExp.prototype[p],"sham",!0)}},e56e:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return o})),a.d(t,"e",(function(){return i})),a.d(t,"f",(function(){return s})),a.d(t,"c",(function(){return l})),a.d(t,"d",(function(){return c}));a("99af");var n=a("b775");function r(e){return Object(n["a"])({url:"/dictionary",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/dictionary/".concat(e),method:"get"})}function i(e){return Object(n["a"])({url:"/dictionary",method:"put",data:e})}function s(e){return Object(n["a"])({url:"/dictionary/".concat(e),method:"delete"})}function l(e,t){return Object(n["a"])({url:"/dictionary/".concat(e,"/").concat(t),method:"get"})}function c(e){return Object(n["a"])({url:"/dictionary/getDropDownList/".concat(e),method:"get"})}},e9c4:function(e,t,a){var n=a("23e7"),r=a("d066"),o=a("d039"),i=r("JSON","stringify"),s=/[\uD800-\uDFFF]/g,l=/^[\uD800-\uDBFF]$/,c=/^[\uDC00-\uDFFF]$/,u=function(e,t,a){var n=a.charAt(t-1),r=a.charAt(t+1);return l.test(e)&&!c.test(r)||c.test(e)&&!l.test(n)?"\\u"+e.charCodeAt(0).toString(16):e},d=o((function(){return'"\\udf06\\ud834"'!==i("\udf06\ud834")||'"\\udead"'!==i("\udead")}));i&&n({target:"JSON",stat:!0,forced:d},{stringify:function(e,t,a){var n=i.apply(null,arguments);return"string"==typeof n?n.replace(s,u):n}})},ed08:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a("53ca");a("d81d"),a("d3b7"),a("4d63"),a("ac1f"),a("2c3e"),a("00b4"),a("25f0"),a("4d90"),a("5319"),a("0643"),a("4e3e"),a("a573"),a("159b");function r(e){if(null===e||"object"!==Object(n["a"])(e))return e;if(Array.isArray(e))return e.map((function(e){return r(e)}));var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=r(e[a]));return t}},f991:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"model-container"},[a("el-card",{staticClass:"filter-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"filter-container"},[a("div",{staticClass:"left-area"},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择模型类型",clearable:""},on:{change:e.handleFilter},model:{value:e.queryParams.modelType,callback:function(t){e.$set(e.queryParams,"modelType",t)},expression:"queryParams.modelType"}},e._l(e.typeOptions,(function(e){return a("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),1)],1),a("div",{staticClass:"right-area"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleAdd}},[e._v(" 新增模型 ")]),a("el-tooltip",{attrs:{content:"刷新数据",placement:"top"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",circle:"",size:"small"},on:{click:e.handleManualRefresh}})],1)],1)])]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"model-list"},[a("el-row",{attrs:{gutter:20}},e._l(e.modelList,(function(t){return a("el-col",{key:t.modelId,attrs:{span:6}},[a("el-card",{staticClass:"model-card",class:{"training-card":e.isModelInProgress(t.trainingStatus),"training-init":"训练中"===t.trainingStatus,"training-optimize":"优化中"===t.trainingStatus,"training-evaluate":"评估中"===t.trainingStatus},attrs:{shadow:"hover"}},[e.isModelInProgress(t.trainingStatus)?a("div",{staticClass:"progress-indicator"},[a("i",{staticClass:"el-icon-loading"}),a("span",[e._v(e._s(t.trainingStatus))])]):e._e(),a("div",{staticClass:"card-header"},[a("el-tooltip",{attrs:{content:t.modelName,placement:"top"}},[a("h3",{staticClass:"model-name"},[e._v(e._s(t.modelName))])]),a("el-tag",{attrs:{type:e.getModelStatusType(t.modelStatus),size:"small",effect:"dark"}},[e._v(" "+e._s(t.modelStatus)+" ")])],1),a("div",{staticClass:"card-content"},[a("div",{staticClass:"info-item"},[a("i",{staticClass:"el-icon-collection-tag"}),a("span",{staticClass:"label"},[e._v("模型类型：")]),a("el-tag",{attrs:{size:"small",effect:"plain"}},[e._v(" "+e._s(t.modelType)+" ")])],1),a("div",{staticClass:"info-item"},[a("i",{staticClass:"el-icon-view"}),a("span",{staticClass:"label"},[e._v("最新版本：")]),a("span",{staticClass:"version-tag"},[e._v("v"+e._s(t.lastModelVersion))])]),a("div",{staticClass:"info-item"},[a("i",{staticClass:"el-icon-loading"}),a("span",{staticClass:"label"},[e._v("训练状态：")]),a("el-tag",{attrs:{type:e.getTrainingStatusType(t.trainingStatus),size:"small"}},[e._v(" "+e._s(t.trainingStatus)+" ")])],1),a("div",{staticClass:"info-item"},[a("i",{staticClass:"el-icon-monitor"}),a("span",{staticClass:"label"},[e._v("模型准确率：")]),a("el-tag",{attrs:{type:"warning",size:"small"}},[e._v(" "+e._s((100*t.accuracyRate).toFixed(3))+"% ")])],1)]),a("div",{staticClass:"card-footer"},[a("el-tooltip",{attrs:{content:"修改模型",placement:"top"}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-edit",circle:"",size:"small"},on:{click:function(a){return e.handleEdit(t)}}})],1),a("el-tooltip",{attrs:{content:"删除模型",placement:"top"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:"未训练"===t.trainingStatus,expression:"model.trainingStatus === '未训练'"}],attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"small"},on:{click:function(a){return e.handleDelete(t)}}})],1),a("el-tooltip",{attrs:{content:"查看详情",placement:"top"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-view",circle:"",size:"small"},on:{click:function(a){return e.handleDetail(t)}}})],1),a("el-tooltip",{attrs:{content:"模型训练",placement:"top"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:"未发布"===t.modelStatus,expression:"model.modelStatus === '未发布'"}],attrs:{type:"primary",icon:"el-icon-thumb",circle:"",size:"small"},on:{click:function(a){return e.handleTrain(t)}}})],1),a("el-tooltip",{attrs:{content:"模型评估",placement:"top"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.accuracyRate>=.95&&0!=t.accuracyRate&&"完成"===t.trainingStatus&&"未发布"===t.modelStatus,expression:"\n                  model.accuracyRate >= 0.95 &&\n                  model.accuracyRate != 0 &&\n                  model.trainingStatus === '完成' &&\n                  model.modelStatus === '未发布'\n                "}],attrs:{type:"primary",icon:"el-icon-edit-outline",circle:"",size:"small"},on:{click:function(a){return e.handleEvaluate(t)}}})],1),a("el-tooltip",{attrs:{content:"未发布"===t.modelStatus?"模型发布":"取消发布",placement:"top"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.accuracyRate>=.95&&0!=t.accuracyRate&&"完成"===t.trainingStatus,expression:"\n                  model.accuracyRate >= 0.95 &&\n                  model.accuracyRate != 0 &&\n                  model.trainingStatus === '完成'\n                "}],attrs:{type:"primary",icon:"el-icon-s-claim",circle:"",size:"small"},on:{click:function(a){return e.handleRelease(t)}}})],1)],1)])],1)})),1)],1),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{background:"","current-page":e.pageNum,"page-size":32,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"add"===e.dialogType?"新增模型":"修改模型",visible:e.dialogVisible,width:"500px","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.handleDialogClose}},[a("el-form",{ref:"modelForm",attrs:{model:e.modelForm,rules:e.rules,"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"模型名称",prop:"modelName"}},[a("el-input",{attrs:{placeholder:"请输入模型名称",maxlength:"50","show-word-limit":""},model:{value:e.modelForm.modelName,callback:function(t){e.$set(e.modelForm,"modelName",t)},expression:"modelForm.modelName"}})],1),a("el-form-item",{attrs:{label:"模型类型",prop:"modelType"}},["edit"===e.dialogType?a("el-input",{attrs:{disabled:"",placeholder:"模型类型"},model:{value:e.modelForm.modelTypeLabel,callback:function(t){e.$set(e.modelForm,"modelTypeLabel",t)},expression:"modelForm.modelTypeLabel"}}):a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择模型类型"},model:{value:e.modelForm.modelType,callback:function(t){e.$set(e.modelForm,"modelType",t)},expression:"modelForm.modelType"}},e._l(e.typeOptions,(function(e){return a("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),1)],1),a("el-form-item",{attrs:{label:"模型描述",prop:"modelDesc"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入模型描述",maxlength:"200","show-word-limit":""},model:{value:e.modelForm.modelDesc,callback:function(t){e.$set(e.modelForm,"modelDesc",t)},expression:"modelForm.modelDesc"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.saveLoading},on:{click:e.handleSave}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"模型评估",visible:e.evaluateDialogVisible,width:"600px","close-on-click-modal":!1,"custom-class":"evaluate-dialog"},on:{"update:visible":function(t){e.evaluateDialogVisible=t}}},[a("div",{staticClass:"evaluate-content"},[a("div",{staticClass:"evaluate-notice"},[a("div",{staticClass:"notice-header"},[a("i",{staticClass:"el-icon-warning-outline"}),a("span",[e._v("注意事项")])]),a("div",{staticClass:"notice-content"},[a("p",[e._v(" • 模型评估只能对最新的版本(v"+e._s(e.currentModel.lastModelVersion)+")进行评估 ")]),a("p",[e._v(" • 评估过程将计算模型在对应数据集上的准确率、F1Score、GScore、精确率和召回率 ")]),a("p",[e._v("• 评估完成后，您可以在模型详情页查看完整的评估报告")])])]),a("div",{staticClass:"evaluate-form"},[a("div",{staticClass:"form-title"},[e._v("选择评估数据集")]),a("div",{staticClass:"form-item"},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择评估数据集"},model:{value:e.evaluateDatasetId,callback:function(t){e.evaluateDatasetId=t},expression:"evaluateDatasetId"}},e._l(e.evaluateDatasets,(function(t){return a("el-option",{key:t.datasetId,attrs:{label:t.datasetName,value:t.datasetId}},[a("div",{staticClass:"dataset-option"},[a("i",{staticClass:"el-icon-folder"}),a("span",[e._v(e._s(t.datasetName))])])])})),1),a("div",{staticClass:"form-tip"},[a("i",{staticClass:"el-icon-info"}),a("span",[e._v("请选择与模型类型相匹配的评估数据集以获得准确结果")])])],1)])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.evaluateDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.submitLoading,disabled:!e.evaluateDatasetId},on:{click:e.submitEvaluate}},[e._v("开始评估")])],1)])],1)},r=[],o=a("5530"),i=a("c7eb"),s=a("1da1"),l=(a("7db0"),a("caad"),a("e9c4"),a("d3b7"),a("0643"),a("fffc"),a("9a9a"),a("6400")),c=a("c356"),u=a("e56e"),d=a("ed08"),m={name:"ModelList",data:function(){return{loading:!1,modelList:[],total:0,pageNum:1,queryParams:{modelType:void 0},typeOptions:[],dialogVisible:!1,dialogType:"add",saveLoading:!1,modelForm:{modelId:void 0,modelName:"",modelType:void 0,modelDesc:""},originalForm:null,rules:{modelName:[{required:!0,message:"请输入模型名称",trigger:"blur"},{max:50,message:"长度不能超过50个字符",trigger:"blur"}],modelType:[{required:!0,message:"请选择模型类型",trigger:"change"}],modelDesc:[{max:200,message:"长度不能超过200个字符",trigger:"blur"}]},refreshTimer:null,evaluateDatasetId:null,evaluateDialogVisible:!1,evaluateDatasets:[],currentModel:{},submitLoading:!1}},created:function(){this.getTypeOptions(),this.getList(),this.startAutoRefresh()},beforeDestroy:function(){this.stopAutoRefresh()},methods:{getTypeOptions:function(){var e=this;return Object(s["a"])(Object(i["a"])().mark((function t(){var a;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["d"])("DATASET_TYPE");case 2:a=t.sent,e.typeOptions=a.data;case 4:case"end":return t.stop()}}),t)})))()},getList:function(){var e=this;return Object(s["a"])(Object(i["a"])().mark((function t(){var a,n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,Object(l["e"])(e.pageNum,e.queryParams);case 4:a=t.sent,200===a.code&&(e.modelList=a.data.data,e.total=a.data.total,n=e.modelList.some((function(t){return e.isModelInProgress(t.trainingStatus)})),n?e.startAutoRefresh():e.stopAutoRefresh()),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](1),console.error("获取模型列表失败:",t.t0),e.$message.error("获取模型列表失败");case 12:return t.prev=12,e.loading=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[1,8,12,15]])})))()},handleFilter:function(){this.pageNum=1,this.getList()},handleCurrentChange:function(e){this.pageNum=e,this.getList()},getModelStatusType:function(e){switch(e){case"已发布":return"success";case"未发布":return"info";default:return"info"}},getTrainingStatusType:function(e){switch(e){case"训练完成":return"success";case"训练中":return"warning";case"未训练":return"info";case"训练失败":return"danger";default:return"info"}},handleAdd:function(){this.dialogType="add",this.resetForm(),this.dialogVisible=!0},handleEdit:function(e){var t=this;return Object(s["a"])(Object(i["a"])().mark((function a(){var n,r;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.dialogType="edit",t.resetForm(),a.next=4,Object(l["c"])(e.modelId);case 4:n=a.sent,200===n.code&&(r=t.typeOptions.find((function(e){return e.key==n.data.modelType})),t.modelForm=Object(o["a"])(Object(o["a"])({},n.data),{},{modelType:n.data.modelType,modelTypeLabel:r?r.value:""}),t.originalForm=Object(d["a"])(t.modelForm),t.dialogVisible=!0);case 6:case"end":return a.stop()}}),a)})))()},resetForm:function(){this.modelForm={modelId:void 0,modelName:"",modelType:void 0,modelDesc:""},this.originalForm=null,this.$refs.modelForm&&this.$refs.modelForm.resetFields()},handleDialogClose:function(){this.resetForm(),this.dialogVisible=!1},handleSave:function(){var e=this;this.$refs.modelForm.validate(function(){var t=Object(s["a"])(Object(i["a"])().mark((function t(a){var n,r,o,s;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=17;break}if("edit"!==e.dialogType){t.next=7;break}if(n={modelId:e.modelForm.modelId,modelName:e.modelForm.modelName,modelType:e.modelForm.modelType,modelDesc:e.modelForm.modelDesc},r={modelId:e.originalForm.modelId,modelName:e.originalForm.modelName,modelType:e.originalForm.modelType,modelDesc:e.originalForm.modelDesc},JSON.stringify(n)!==JSON.stringify(r)){t.next=7;break}return e.dialogVisible=!1,t.abrupt("return");case 7:return e.saveLoading=!0,t.prev=8,o="add"===e.dialogType?l["a"]:l["f"],t.next=12,o(e.modelForm);case 12:s=t.sent,200===s.code&&(e.$message.success("add"===e.dialogType?"新增成功":"修改成功"),e.dialogVisible=!1,e.getList());case 14:return t.prev=14,e.saveLoading=!1,t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[8,,14,17]])})));return function(e){return t.apply(this,arguments)}}())},handleDelete:function(e){var t=this;this.$confirm("确认删除该模型吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(Object(i["a"])().mark((function a(){var n;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(l["b"])(e.modelId);case 3:n=a.sent,200===n.code&&(t.$message.success("删除成功"),1===t.modelList.length&&t.pageNum>1&&t.pageNum--,t.getList()),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),console.error("删除模型失败:",a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])}))))},handleTrain:function(e){this.$router.push({path:"/model/train",query:{modelId:e.modelId,modelName:e.modelName,modelType:e.modelType,lastModelVersion:e.lastModelVersion}})},handleEvaluate:function(e){var t=this;return Object(s["a"])(Object(i["a"])().mark((function a(){var n;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.loading=!0,t.currentModel=e,a.next=5,Object(c["d"])(e.modelId,2);case 5:if(n=a.sent,console.log(n),200!==n.code){a.next=16;break}if(n.data&&0!==n.data.length){a.next=11;break}return t.$message.warning("请前往数据集管理页面上传用于评估的数据集"),a.abrupt("return");case 11:t.evaluateDatasets=n.data,t.evaluateDatasetId=null,t.evaluateDialogVisible=!0,a.next=17;break;case 16:t.$message.error(n.message||"获取评估数据集失败");case 17:return a.prev=17,t.loading=!1,a.finish(17);case 20:case"end":return a.stop()}}),a,null,[[0,,17,20]])})))()},submitEvaluate:function(){var e=this;return Object(s["a"])(Object(i["a"])().mark((function t(){var a,n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.evaluateDatasetId){t.next=3;break}return e.$message.warning("请选择评估数据集"),t.abrupt("return");case 3:return t.prev=3,e.submitLoading=!0,a={modelId:e.currentModel.modelId,operationType:3,datasetIds:[e.evaluateDatasetId]},t.next=8,Object(c["a"])(a);case 8:n=t.sent,200===n.code?(e.$message.success("评估任务已提交"),e.evaluateDialogVisible=!1,e.refreshModelList()):e.$message.error(n.message||"评估任务提交失败");case 10:return t.prev=10,e.submitLoading=!1,t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[3,,10,13]])})))()},handleDetail:function(e){this.$router.push({path:"/model/detail",query:{modelId:e.modelId}})},handleRelease:function(e){var t=this;return Object(s["a"])(Object(i["a"])().mark((function a(){var n,r,o;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,n="未发布"===e.modelStatus,a.next=4,t.$confirm(n?'确定要发布模型"'.concat(e.modelName,'"吗？发布后可供应用调用。'):'确定要取消发布模型"'.concat(e.modelName,'"吗？取消后应用将无法调用该模型。'),n?"发布模型":"取消发布",{confirmButtonText:n?"确认发布":"确认取消",cancelButtonText:"取消操作",type:n?"success":"warning",closeOnClickModal:!1});case 4:return t.loading=!0,r=n?0:1,a.next=8,Object(c["g"])(e.modelId,r);case 8:o=a.sent,200===o.code?t.$message.success(n?"模型发布成功":"模型取消发布成功"):t.$message.error(o.message||"操作失败，请稍后重试"),t.getList(),a.next=16;break;case 13:a.prev=13,a.t0=a["catch"](0),"cancel"!==a.t0&&"close"!==a.t0&&(console.error("模型发布操作失败:",a.t0),t.$message.error("操作失败，请稍后重试"));case 16:return a.prev=16,t.loading=!1,a.finish(16);case 19:case"end":return a.stop()}}),a,null,[[0,13,16,19]])})))()},startAutoRefresh:function(){var e=this,t=this.modelList.some((function(t){return e.isModelInProgress(t.trainingStatus)}));t?this.refreshTimer||(this.refreshTimer=setInterval((function(){e.refreshModelList()}),1e4)):this.stopAutoRefresh()},stopAutoRefresh:function(){this.refreshTimer&&(clearInterval(this.refreshTimer),this.refreshTimer=null)},refreshModelList:function(){var e=this;this.loading=!0,this.getList().finally((function(){e.loading=!1;var t=e.modelList.some((function(t){return e.isModelInProgress(t.trainingStatus)}));t||(console.log("所有模型处理完成，停止定时刷新"),e.stopAutoRefresh())}))},handleManualRefresh:function(){this.refreshModelList()},isModelInProgress:function(e){return["训练中","优化中","评估中"].includes(e)}},activated:function(){this.refreshTimer||this.startAutoRefresh(),this.refreshModelList()},deactivated:function(){this.stopAutoRefresh()}},f=m,p=(a("588a"),a("2877")),g=Object(p["a"])(f,n,r,!1,null,"10fdb788",null);t["default"]=g.exports},fffc:function(e,t,a){"use strict";var n=a("23e7"),r=a("2266"),o=a("1c0b"),i=a("825a");n({target:"Iterator",proto:!0,real:!0},{find:function(e){return i(this),o(e),r(this,(function(t){if(e(t))return r.stop(t)}),void 0,!1,!0).result}})}}]);