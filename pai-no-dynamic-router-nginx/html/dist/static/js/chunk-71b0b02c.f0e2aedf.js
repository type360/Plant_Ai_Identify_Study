(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-71b0b02c"],{"204e":function(t,e,i){},"2d1a":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"entity-container"},[i("div",{staticClass:"operation-container"},[i("div",{staticClass:"left-btns"},[i("el-button",{attrs:{icon:"el-icon-back"},on:{click:t.goBack}},[t._v("返回")]),i("el-button",{attrs:{type:"success",icon:"el-icon-upload"},on:{click:t.showUploadDialog}},[t._v("上传图片")])],1),i("div",{staticClass:"right-btns"},[i("el-button",{attrs:{type:"danger",icon:"el-icon-delete",disabled:0===t.selectedImages.length},on:{click:t.handleBatchDelete}},[t._v("批量删除")]),t.selectedImages.length?i("el-button",{attrs:{type:"info",icon:"el-icon-check"},on:{click:function(e){return t.toggleSelection(!1)}}},[t._v("取消选择")]):t._e()],1)]),i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",{staticClass:"card-title"},[t._v(t._s(t.classifyInfo.classifyName)+" - 实体列表")])]),i("div",{staticClass:"image-list"},[i("el-row",{attrs:{gutter:20}},t._l(t.imageList,(function(e,s){return i("el-col",{key:s,attrs:{span:3}},[i("div",{staticClass:"image-item"},[i("div",{staticClass:"image-checkbox"},[i("el-checkbox",{on:{change:function(i){return t.handleSelect(e)}},model:{value:e.selected,callback:function(i){t.$set(e,"selected",i)},expression:"item.selected"}})],1),i("el-image",{attrs:{src:e.entityUrl,fit:"cover","preview-src-list":[e.entityUrl]}},[i("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[i("i",{staticClass:"el-icon-picture-outline"})])])],1)])})),1)],1),i("div",{staticClass:"pagination-container"},[i("el-pagination",{attrs:{background:"","current-page":t.pageParams.pageNum,layout:"total, prev, pager, next, jumper",total:t.total,"page-size":32},on:{"current-change":t.handleCurrentChange}})],1)]),i("el-dialog",{attrs:{title:"上传说明",visible:t.noticeDialogVisible,width:"500px","close-on-click-modal":!1,"custom-class":"upload-notice-dialog"},on:{"update:visible":function(e){t.noticeDialogVisible=e}}},[i("div",{staticClass:"upload-notice-content"},[i("div",{staticClass:"notice-header"},[i("i",{staticClass:"el-icon-warning-outline"}),i("span",[t._v("上传须知")])]),i("div",{staticClass:"notice-divider"}),i("div",{staticClass:"notice-body"},[i("div",{staticClass:"notice-section"},[i("div",{staticClass:"section-title"},[i("i",{staticClass:"el-icon-info"}),i("span",[t._v("文件要求")])]),i("ul",{staticClass:"section-list"},[i("li",[i("i",{staticClass:"el-icon-check"}),i("span",[t._v("上传文件必须是zip格式的压缩包")])]),i("li",[i("i",{staticClass:"el-icon-check"}),i("span",[t._v("压缩包中只能包含图片文件(jpg/png/bmp/jpeg)")])])])]),i("div",{staticClass:"notice-section"},[i("div",{staticClass:"section-title"},[i("i",{staticClass:"el-icon-picture"}),i("span",[t._v("图片规格")])]),i("ul",{staticClass:"section-list"},[i("li",[i("i",{staticClass:"el-icon-check"}),i("span",[t._v("单个图片大小不能超过4MB")])]),i("li",[i("i",{staticClass:"el-icon-check"}),i("span",[t._v("图片长宽比需要在3:1以内")])]),i("li",[i("i",{staticClass:"el-icon-check"}),i("span",[t._v("图片最长边需要小于4096px，最短边需要大于30px")])])])])])]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.noticeDialogVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.handleNoticeConfirm}},[t._v("已阅读，开始上传")])],1)]),i("upload-dialog",{attrs:{visible:t.uploadDialogVisible,maxSize:2,datasetId:t.classifyInfo.datasetId,classifyId:t.classifyInfo.classifyId},on:{"update:visible":[function(e){t.uploadDialogVisible=e},t.handleUploadClose]}})],1)},a=[],n=i("5530"),c=(i("d81d"),i("a434"),i("d3b7"),i("0643"),i("4e3e"),i("a573"),i("159b"),i("99af"),i("b775"));function l(t,e){return Object(c["a"])({url:"/entity/".concat(t,"/").concat(e),method:"get"})}function o(t,e,i){return Object(c["a"])({url:"/entity/".concat(t,"/").concat(e),method:"delete",data:i})}var r=i("c7f0"),d={name:"Entity",components:{UploadDialog:r["a"]},data:function(){return{classifyInfo:{},imageList:[],selectedImages:[],moveDialogVisible:!1,moveForm:{targetClassifyId:""},classifyOptions:[],uploadDialogVisible:!1,pageParams:{pageNum:1},total:0,noticeDialogVisible:!1}},created:function(){var t=this.$route.query,e=t.datasetId,i=t.classifyId,s=t.classifyName;this.classifyInfo={datasetId:e,classifyId:i,classifyName:s},this.getEntityList()},methods:{goBack:function(){this.$router.go(-1)},getEntityList:function(){var t=this,e=this.pageParams.pageNum;l(this.classifyInfo.classifyId,e).then((function(e){if(200===e.code){var i=e.data,s=i.data,a=i.total;t.imageList=s.map((function(t){return Object(n["a"])(Object(n["a"])({},t),{},{selected:!1})})),t.total=a}}))},handleSelect:function(t){if(t.selected)this.selectedImages.push(t.entityId);else{var e=this.selectedImages.indexOf(t.entityId);e>-1&&this.selectedImages.splice(e,1)}},toggleSelection:function(t){this.imageList.forEach((function(e){e.selected=t})),this.selectedImages=t?this.imageList.map((function(t){return t.id})):[]},handleBatchDelete:function(){var t=this;0!==this.selectedImages.length&&this.$confirm("确认删除选中的 ".concat(this.selectedImages.length," 张图片吗？"),"提示",{type:"warning"}).then((function(){o(t.classifyInfo.datasetId,t.classifyInfo.classifyId,t.selectedImages).then((function(){t.$message.success("删除成功"),t.resetPage(),t.getEntityList(),t.selectedImages=[]}))})).catch((function(){}))},showUploadDialog:function(){this.noticeDialogVisible=!0},handleNoticeConfirm:function(){this.noticeDialogVisible=!1,this.uploadDialogVisible=!0},handleUploadClose:function(){this.uploadDialogVisible=!1,this.getEntityList()},handleCurrentChange:function(t){this.pageParams.pageNum=t,this.getEntityList()},resetPage:function(){this.pageParams.pageNum=1,this.selectedImages=[]}}},u=d,g=(i("6728"),i("2877")),f=Object(g["a"])(u,s,a,!1,null,"514e9a23",null);e["default"]=f.exports},6728:function(t,e,i){"use strict";i("204e")},a434:function(t,e,i){"use strict";var s=i("23e7"),a=i("23cb"),n=i("a691"),c=i("50c4"),l=i("7b0b"),o=i("65f0"),r=i("8418"),d=i("1dde"),u=i("ae40"),g=d("splice"),f=u("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,p=Math.min,m=9007199254740991,v="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!g||!f},{splice:function(t,e){var i,s,d,u,g,f,b=l(this),y=c(b.length),C=a(t,y),I=arguments.length;if(0===I?i=s=0:1===I?(i=0,s=y-C):(i=I-2,s=p(h(n(e),0),y-C)),y+i-s>m)throw TypeError(v);for(d=o(b,s),u=0;u<s;u++)g=C+u,g in b&&r(d,u,b[g]);if(d.length=s,i<s){for(u=C;u<y-s;u++)g=u+s,f=u+i,g in b?b[f]=b[g]:delete b[f];for(u=y;u>y-s+i;u--)delete b[u-1]}else if(i>s)for(u=y-s;u>C;u--)g=u+s-1,f=u+i-1,g in b?b[f]=b[g]:delete b[f];for(u=0;u<i;u++)b[u+C]=arguments[u+2];return b.length=y-s+i,d}})}}]);