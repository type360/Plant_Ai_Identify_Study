(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e0dd557"],{"9ed6":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-container"},[n("div",{staticClass:"bg-animation"},[n("div",{staticClass:"stars"},e._l(20,(function(e){return n("div",{key:e,staticClass:"star"})})),0),n("div",{staticClass:"circles"},e._l(10,(function(e){return n("div",{key:e,staticClass:"circle"})})),0)]),n("div",{staticClass:"login-box"},[e._m(0),n("div",{staticClass:"login-right"},[n("div",{staticClass:"login-form-container"},[n("h3",{staticClass:"welcome-text"},[e._v("欢迎登录")]),n("div",{staticClass:"switch-tabs"},[n("div",{staticClass:"tab-item",class:{active:"account"===e.loginType},on:{click:function(t){return e.handleSwitchLoginType("account")}}},[e._v(" 账号密码登录 ")]),n("div",{staticClass:"tab-item",class:{active:"phone"===e.loginType},on:{click:function(t){return e.handleSwitchLoginType("phone")}}},[e._v(" 手机号登录 ")])]),n("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules}},["account"===e.loginType?[n("el-form-item",{attrs:{prop:"username"}},[n("el-input",{ref:"username",attrs:{placeholder:"请输入用户名","prefix-icon":"el-icon-user"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{ref:"password",attrs:{type:e.passwordType,placeholder:"请输入密码","prefix-icon":"el-icon-lock"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}},[n("i",{class:["el-input__icon","password"===e.passwordType?"el-icon-view":"el-icon-hide"],attrs:{slot:"suffix"},on:{click:e.showPwd},slot:"suffix"})])],1)]:[n("el-form-item",{attrs:{prop:"telephone"}},[n("el-input",{ref:"telephone",attrs:{placeholder:"请输入手机号码","prefix-icon":"el-icon-mobile-phone"},model:{value:e.loginForm.telephone,callback:function(t){e.$set(e.loginForm,"telephone",t)},expression:"loginForm.telephone"}},[n("el-button",{staticClass:"code-button",attrs:{slot:"append",disabled:!e.canGetCode},on:{click:e.getCode},slot:"append"},[e._v(" "+e._s(e.codeButtonText)+" ")])],1)],1),n("el-form-item",{attrs:{prop:"code"}},[n("el-input",{ref:"code",attrs:{placeholder:"请输入验证码","prefix-icon":"el-icon-key",maxlength:"4"},model:{value:e.loginForm.code,callback:function(t){e.$set(e.loginForm,"code",t)},expression:"loginForm.code"}})],1)],n("el-form-item",[n("el-button",{staticClass:"login-button",attrs:{type:"primary",loading:e.loading},on:{click:e.handleLogin}},[e._v(" "+e._s(e.loading?"登录中...":"登 录")+" ")])],1)],2)],1)])])])},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-left"},[n("div",{staticClass:"system-info"},[n("div",{staticClass:"icon"},[n("i",{staticClass:"el-icon-monitor"})]),n("h1",[e._v("智慧农业")]),n("h2",[e._v("植物病虫害AI识别系统")]),n("div",{staticClass:"decoration"},[n("span"),n("span"),n("span")])])])}],s=n("c7eb"),r=n("1da1"),a=n("7ded"),c=n("61f7"),l={name:"Login",data:function(){return{loginType:"account",loginForm:{username:"",password:"",telephone:"",code:""},loginRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],telephone:[{required:!0,message:"请输入手机号码",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"},{min:4,max:4,message:"验证码长度为4位",trigger:"blur"}]},loading:!1,passwordType:"password",redirect:void 0,isGettingCode:!1,countdown:60,timer:null}},computed:{canGetCode:function(){return!this.isGettingCode&&this.loginForm.telephone&&Object(c["b"])(this.loginForm.telephone)},codeButtonText:function(){return this.isGettingCode?"".concat(this.countdown,"s后重新获取"):"获取验证码"}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},methods:{validatePhone:function(e,t,n){Object(c["b"])(t)?n():n(new Error("请输入正确的手机号码"))},handleSwitchLoginType:function(e){this.loginType=e,this.$refs.loginForm.resetFields(),this.timer&&(clearInterval(this.timer),this.isGettingCode=!1,this.countdown=60)},showPwd:function(){var e=this;this.passwordType="password"===this.passwordType?"":"password",this.$nextTick((function(){e.$refs.password.focus()}))},getCode:function(){var e=this;return Object(r["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.canGetCode){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,e.isGettingCode=!0,e.countdown=60,e.timer=setInterval((function(){e.countdown>0?e.countdown--:(clearInterval(e.timer),e.isGettingCode=!1)}),1e3),t.next=8,Object(a["b"])(e.loginForm.telephone);case 8:e.$message.success("验证码已发送"),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](2),clearInterval(e.timer),e.isGettingCode=!1;case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))()},handleLogin:function(){var e=this;this.$refs.loginForm.validate(function(){var t=Object(r["a"])(Object(s["a"])().mark((function t(n){var o;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,e.loading=!0,"account"===e.loginType?a["d"]:a["c"],o="account"===e.loginType?{username:e.loginForm.username,password:e.loginForm.password}:{telephone:e.loginForm.telephone,code:e.loginForm.code},t.next=8,e.$store.dispatch("user/".concat(e.loginType,"Login"),o);case 8:e.$router.push({path:e.redirect||"/"});case 9:return t.prev=9,e.loading=!1,t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[2,,9,12]])})));return function(e){return t.apply(this,arguments)}}())}},beforeDestroy:function(){this.timer&&clearInterval(this.timer)}},d=l,u=(n("da65"),n("2877")),p=Object(u["a"])(d,o,i,!1,null,"6cba3100",null);t["default"]=p.exports},b93d:function(e,t,n){},da65:function(e,t,n){"use strict";n("b93d")}}]);