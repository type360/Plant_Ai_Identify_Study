(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-551161cc"],{1578:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"identify-container"},[s("el-card",{staticClass:"header-card",attrs:{shadow:"hover"}},[s("div",{staticClass:"card-header"},[s("div",{staticClass:"header-title"},[s("i",{staticClass:"el-icon-monitor"}),s("span",[t._v("智能识别")])]),s("div",{staticClass:"header-desc"},[t._v("选择模型上传图片，获取快速精准的识别结果")])])]),s("div",{staticClass:"main-content"},[s("el-card",{staticClass:"operation-card",attrs:{shadow:"hover"}},[s("div",{staticClass:"custom-steps"},[s("div",{staticClass:"step-item",class:{"step-done":t.activeStep>1,"step-active":1===t.activeStep}},[s("div",{staticClass:"step-icon"},[t.activeStep>1?s("i",{staticClass:"el-icon-check"}):s("span",[t._v("1")])]),s("div",{staticClass:"step-title"},[t._v("选择模型")]),t.activeStep>1?s("div",{staticClass:"step-arrow"},[s("i",{staticClass:"el-icon-arrow-right"})]):t._e()]),s("div",{staticClass:"step-item",class:{"step-done":t.activeStep>2,"step-active":2===t.activeStep,"step-pending":t.activeStep<2}},[s("div",{staticClass:"step-icon"},[t.activeStep>2?s("i",{staticClass:"el-icon-check"}):s("span",[t._v("2")])]),s("div",{staticClass:"step-title"},[t._v("上传图片")]),t.activeStep>2?s("div",{staticClass:"step-arrow"},[s("i",{staticClass:"el-icon-arrow-right"})]):t._e()]),s("div",{staticClass:"step-item",class:{"step-done":t.activeStep>3,"step-active":3===t.activeStep,"step-pending":t.activeStep<3}},[s("div",{staticClass:"step-icon"},[t.activeStep>3?s("i",{staticClass:"el-icon-check"}):s("span",[t._v("3")])]),s("div",{staticClass:"step-title"},[t._v("查看结果")])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:1===t.activeStep,expression:"activeStep === 1"}],staticClass:"step-content"},[s("div",{staticClass:"models-header"},[s("i",{staticClass:"el-icon-collection"}),s("span",[t._v("可用模型列表")])]),s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.modelsLoading,expression:"modelsLoading"}],staticClass:"models-container"},[t._l(t.modelList,(function(e){return s("div",{key:e.modelId,staticClass:"model-item",class:{selected:t.selectedModelId===e.modelId},on:{click:function(s){return t.selectModel(e)}}},[s("div",{staticClass:"model-icon"},[s("i",{staticClass:"el-icon-cpu"})]),s("div",{staticClass:"model-info"},[s("div",{staticClass:"model-name"},[t._v(t._s(e.modelName))]),s("div",{staticClass:"model-desc"},[t._v(t._s(e.modelDesc))])]),t.selectedModelId===e.modelId?s("div",{staticClass:"select-icon"},[s("i",{staticClass:"el-icon-check"})]):t._e()])})),0!==t.modelList.length||t.modelsLoading?t._e():s("el-empty",{attrs:{description:"暂无可用模型"}})],2),s("div",{staticClass:"step-actions"},[s("el-button",{attrs:{type:"primary",disabled:!t.selectedModelId},on:{click:t.nextStep}},[t._v("下一步")])],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:2===t.activeStep,expression:"activeStep === 2"}],staticClass:"step-content"},[s("div",{staticClass:"upload-header"},[s("i",{staticClass:"el-icon-upload"}),s("span",[t._v("上传图片")])]),s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.uploading,expression:"uploading"}],staticClass:"upload-area",on:{click:t.triggerUpload}},[s("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:t.handleFileChange}}),t.imageUrl?s("div",{staticClass:"image-preview"},[s("img",{attrs:{src:t.imageUrl,alt:"预览图"}})]):[s("i",{staticClass:"el-icon-picture"}),s("div",{staticClass:"upload-text"},[t._v("点击或拖拽图片到此处上传")]),s("div",{staticClass:"upload-tip"},[t._v("支持 jpg、png、jpeg 格式图片")])]],2),s("div",{staticClass:"selected-model"},[s("span",[t._v("已选模型:")]),s("el-tag",{attrs:{size:"medium"}},[t._v(t._s(t.selectedModelName))])],1),s("div",{staticClass:"step-actions"},[s("el-button",{on:{click:t.previousStep}},[t._v("上一步")]),s("el-button",{attrs:{type:"primary",disabled:!t.imageFile,loading:t.identifying},on:{click:t.startIdentify}},[t._v("开始识别")])],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:3===t.activeStep,expression:"activeStep === 3"}],staticClass:"step-content"},[s("div",{staticClass:"result-header"},[s("i",{staticClass:"el-icon-data-analysis"}),s("span",[t._v("识别结果")])]),s("div",{staticClass:"result-content"},[s("div",{staticClass:"result-image"},[s("img",{attrs:{src:t.imageUrl,alt:"识别图片"}})]),s("div",{staticClass:"result-info"},[s("div",{staticClass:"result-icon"},[s("i",{staticClass:"el-icon-check-circle"})]),s("div",{staticClass:"result-message"},[s("div",{staticClass:"result-title"},[t._v("识别成功")]),s("div",{staticClass:"result-desc"},[t._v(" 该图片所属的病虫害为 "),s("span",{staticClass:"disease-name"},[t._v(t._s(t.identifyResult))])])])])]),s("div",{staticClass:"step-actions"},[s("el-button",{attrs:{type:"primary"},on:{click:t.resetAndGoToStep1}},[t._v("继续识别")])],1)])]),s("el-card",{staticClass:"info-card",attrs:{shadow:"hover"}},[s("div",{staticClass:"info-header"},[s("i",{staticClass:"el-icon-info"}),s("span",[t._v("使用指南")])]),s("div",{staticClass:"guide-steps"},[s("div",{staticClass:"guide-step"},[s("div",{staticClass:"step-number"},[t._v("1")]),s("div",{staticClass:"step-text"},[s("div",{staticClass:"step-title"},[t._v("选择模型")]),s("div",{staticClass:"step-desc"},[t._v(" 从已发布的模型列表中选择一个适合您需求的模型 ")])])]),s("div",{staticClass:"guide-step"},[s("div",{staticClass:"step-number"},[t._v("2")]),s("div",{staticClass:"step-text"},[s("div",{staticClass:"step-title"},[t._v("上传图片")]),s("div",{staticClass:"step-desc"},[t._v(" 上传需要识别的图片，支持jpg、png、jpeg格式 ")])])]),s("div",{staticClass:"guide-step"},[s("div",{staticClass:"step-number"},[t._v("3")]),s("div",{staticClass:"step-text"},[s("div",{staticClass:"step-title"},[t._v("查看结果")]),s("div",{staticClass:"step-desc"},[t._v(" 系统将自动分析图片，并显示识别结果和防治建议 ")])])])]),s("div",{staticClass:"tips"},[s("div",{staticClass:"tips-header"},[s("i",{staticClass:"el-icon-star-on"}),s("span",[t._v("温馨提示")])]),s("ul",{staticClass:"tips-list"},[s("li",[t._v("请确保上传清晰的图片，以获得更准确的识别结果")]),s("li",[t._v("不同类型的病害可能需要选择不同的专业模型")]),s("li",[t._v("系统提供的防治建议仅供参考，具体应用请咨询专业人士")])])])])],1)],1)},a=[],c=s("c7eb"),n=s("1da1"),l=(s("caad"),s("c356")),d={name:"Identify",data:function(){return{activeStep:1,modelsLoading:!1,modelList:[],selectedModelId:null,selectedModelName:"",imageFile:null,imageUrl:"",uploading:!1,identifying:!1,identifyResult:""}},mounted:function(){this.fetchModels()},methods:{fetchModels:function(){var t=this;return Object(n["a"])(Object(c["a"])().mark((function e(){var s;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.modelsLoading=!0,e.next=4,Object(l["c"])();case 4:s=e.sent,200===s.code?t.modelList=s.data||[]:t.$message.error(s.message||"获取模型列表失败");case 6:return e.prev=6,t.modelsLoading=!1,e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[0,,6,9]])})))()},selectModel:function(t){this.selectedModelId=t.modelId,this.selectedModelName=t.modelName},nextStep:function(){this.activeStep<3&&this.activeStep++},previousStep:function(){this.activeStep>1&&this.activeStep--},triggerUpload:function(){this.$refs.fileInput.click()},handleFileChange:function(t){var e=this,s=t.target.files[0];if(s){var i=["image/jpeg","image/png","image/jpg"];if(i.includes(s.type)){this.uploading=!0,this.imageFile=s;var a=new FileReader;a.onload=function(t){e.imageUrl=t.target.result,e.uploading=!1},a.readAsDataURL(s)}else this.$message.error("请上传jpg、png或jpeg格式的图片")}},startIdentify:function(){var t=this;return Object(n["a"])(Object(c["a"])().mark((function e(){var s;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.selectedModelId&&t.imageFile){e.next=3;break}return t.$message.warning("请先选择模型并上传图片"),e.abrupt("return");case 3:return e.prev=3,t.identifying=!0,e.next=7,Object(l["e"])(t.selectedModelId,t.imageFile);case 7:s=e.sent,200===s.code?(t.identifyResult=s.data,t.nextStep()):t.$message.error(s.message||"识别失败");case 9:return e.prev=9,t.identifying=!1,e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[3,,9,12]])})))()},resetAndGoToStep1:function(){this.resetAll(),this.activeStep=1},resetAll:function(){this.selectedModelId="",this.selectedModelName="",this.imageUrl="",this.imageFile=null,this.identifyResult="",this.uploading=!1,this.identifying=!1}}},o=d,r=(s("38fa"),s("2877")),p=Object(r["a"])(o,i,a,!1,null,"a5baa224",null);e["default"]=p.exports},"38fa":function(t,e,s){"use strict";s("7c59")},"7c59":function(t,e,s){},c356:function(t,e,s){"use strict";s.d(e,"d",(function(){return a})),s.d(e,"b",(function(){return c})),s.d(e,"f",(function(){return n})),s.d(e,"a",(function(){return l})),s.d(e,"g",(function(){return d})),s.d(e,"c",(function(){return o})),s.d(e,"e",(function(){return r}));s("99af");var i=s("b775");function a(t,e){return Object(i["a"])({url:"/model/operation/getTrainingDatasets/".concat(t,"/").concat(e),method:"get"})}function c(t){return Object(i["a"])({url:"/model/operation/config/".concat(t),method:"get"})}function n(t){return Object(i["a"])({url:"/model/operation/train",method:"post",data:t})}function l(t){return Object(i["a"])({url:"/model/operation/evaluate",method:"post",data:t})}function d(t,e){return Object(i["a"])({url:"/model/operation/release/".concat(t,"/").concat(e),method:"post"})}function o(){return Object(i["a"])({url:"/model/operation/getReleaseModel",method:"get"})}function r(t,e){var s=new FormData;return s.append("file",e),Object(i["a"])({url:"/model/operation/identify/".concat(t),method:"post",data:s,headers:{"Content-Type":"multipart/form-data"}})}}}]);